import{s as w,l as L,o,c as n,h as D,u as r,a as e,t as i,F as $,d as C,g as U,r as E,z as K,w as I,f as _,i as h,v as q,n as G,e as y,m as S,b as V,k as Q}from"./app-MOnSz09z.js";import{_ as W}from"./utils-mT5RtY73.js";import{u as T}from"./renters-BWrsbS6i.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as H}from"./tutors-BvmYhJZ0.js";import"./hotel-logo-EkMEN4AC.js";const X={class:"mt-6"},Y={key:0,class:"flex items-center justify-center my-6 animate-pulse"},Z={key:1,class:"flex items-center justify-center my-6"},ee={class:"bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-3"},te={class:"text-lg font-medium"},se={key:2,class:"flex flex-col items-center my-6"},re={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8"},oe={__name:"RentersList",setup(d){const u=T(),{filteredRenters:m,loading:l,errors:p,renters:f}=w(u),{fetchRenters:x}=u;return L(()=>{x()}),(k,t)=>(o(),n("div",X,[D(r(Ue)),r(l).fetch?(o(),n("div",Y,t[0]||(t[0]=[e("div",{class:"flex items-center space-x-2 bg-gray-800 px-6 py-3 rounded-lg shadow-lg"},[e("span",{class:"animate-spin inline-block w-6 h-6 border-4 border-white border-t-transparent rounded-full"}),e("p",{class:"text-white text-lg font-medium"},"Chargement des locataires...")],-1)]))):r(p).fetch?(o(),n("div",Z,[e("div",ee,[t[1]||(t[1]=e("span",{class:"text-xl"},"❌",-1)),e("p",te,"Une erreur est survenue : "+i(r(p).fetch),1)])])):r(m).length===0?(o(),n("div",se,t[2]||(t[2]=[e("div",{class:"bg-gray-800 px-6 py-4 rounded-lg shadow-lg text-center"},[e("p",{class:"text-gray-300 text-lg"},"📭 Aucun locataire trouvé."),e("p",{class:"text-gray-400 text-sm mt-2"},"Ajoutez-en un pour commencer !")],-1)]))):(o(),n("div",re,[(o(!0),n($,null,C(r(m),b=>(o(),U(r(qe),{renter:b,key:b.id},null,8,["renter"]))),128))]))]))}},ne=j(oe,[["__scopeId","data-v-d6b92e92"]]),le={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-md z-50"},ae={class:"bg-white p-6 rounded-xl shadow-xl w-[90%] sm:w-96 transform transition-all animate-fade-in"},ie={class:"flex items-center justify-between border-b pb-2"},de={class:"text-xl font-semibold text-gray-800 flex items-center"},ue={key:0,class:"mr-2"},me={key:1,class:"mr-2"},ce={key:0,class:"error-message"},pe={key:0,class:"error-message"},fe=["value"],xe={key:0,class:"error-message"},ve={class:"flex justify-end space-x-3 mt-4"},_e=["disabled"],be={key:0,class:"animate-spin mr-2"},ge={__name:"RenterFormModal",props:{renter:Object},emits:["close"],setup(d,{emit:u}){const m=d,l=u,p=T(),{addRenter:f,updateRenter:x,clearErrors:k}=p,{errors:t,loading:b}=w(p),R=H(),{fetchTutors:A}=R,{tutors:g}=w(R);L(()=>A());const s=E({id:null,last_name:"",first_name:"",tutor_id:""});K(()=>{var F;s.value=m.renter?{...m.renter,tutor_id:((F=m.renter.tutor)==null?void 0:F.id)||""}:{id:null,last_name:"",first_name:"",tutor_id:""}});const a=async()=>{(s.value.id?await x(s.value):await f(s.value))&&M()},M=()=>{k("validationErrors"),l("close")};return(F,c)=>{var N,z,B,O,P;return o(),n("div",le,[e("div",{onClick:I(M,["self"]),class:"fixed inset-0"}),e("div",ae,[e("div",ie,[e("h2",de,[s.value.id?(o(),n("span",ue,"✏️")):(o(),n("span",me,"➕")),_(" "+i(s.value.id?"Éditer le locataire":"Ajouter un locataire"),1)]),e("button",{onClick:M,class:"text-gray-500 hover:text-gray-700 transition"},"✖️")]),e("form",{onSubmit:I(a,["prevent"]),class:"mt-4 space-y-4"},[e("div",null,[c[3]||(c[3]=e("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),h(e("input",{ref:"firstInput",type:"text","onUpdate:modelValue":c[0]||(c[0]=v=>s.value.last_name=v),class:G(["input-field",{"border-red-500":(N=r(t).validationErrors)==null?void 0:N.last_name}])},null,2),[[q,s.value.last_name]]),(z=r(t).validationErrors)!=null&&z.last_name?(o(),n("p",ce,i(r(t).validationErrors.last_name.join(", ")),1)):y("",!0)]),e("div",null,[c[4]||(c[4]=e("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),h(e("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=v=>s.value.first_name=v),class:G(["input-field",{"border-red-500":(B=r(t).validationErrors)==null?void 0:B.first_name}])},null,2),[[q,s.value.first_name]]),(O=r(t).validationErrors)!=null&&O.first_name?(o(),n("p",pe,i(r(t).validationErrors.first_name.join(", ")),1)):y("",!0)]),e("div",null,[c[6]||(c[6]=e("label",{for:"tutor_id",class:"block text-sm font-medium text-gray-700"},"Tuteur",-1)),h(e("select",{"onUpdate:modelValue":c[2]||(c[2]=v=>s.value.tutor_id=v),class:"input-field"},[c[5]||(c[5]=e("option",{value:""},"Sélectionner un tuteur (optionnel)",-1)),(o(!0),n($,null,C(r(g),v=>(o(),n("option",{value:v.id,key:v.id},i(v.last_name.toUpperCase())+" "+i(v.first_name),9,fe))),128))],512),[[S,s.value.tutor_id]]),(P=r(t).validationErrors)!=null&&P.tutor_id?(o(),n("p",xe,i(r(t).validationErrors.tutor_id.join(", ")),1)):y("",!0)]),e("div",ve,[e("button",{type:"button",onClick:M,class:"btn-secondary"},"Annuler"),e("button",{type:"submit",class:"btn-primary flex items-center",disabled:s.value.id?r(b).update:r(b).add},[(s.value.id?r(b).update:r(b).add)?(o(),n("span",be,"⏳")):y("",!0),_(" "+i(s.value.id?"Mettre à jour":"Ajouter"),1)],8,_e)])],32)])])}}},J=j(ge,[["__scopeId","data-v-c179afd1"]]),ye={class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-md flex items-center justify-center z-50"},$e={class:"bg-white p-6 rounded-lg shadow-lg w-[24rem] animate-fade-in transform transition-transform scale-95"},ke={class:"text-gray-700 mt-3"},we={class:"text-gray-900"},he={__name:"RenterDeleteModal",props:{renter:Object},emits:["close"],setup(d,{emit:u}){const m=T(),{deleteRenter:l}=m,p=u;function f(){p("close")}async function x(){await l(d.renter.id)}return(k,t)=>(o(),n("div",ye,[e("div",{onClick:I(f,["self"]),class:"absolute inset-0"}),e("div",$e,[t[3]||(t[3]=e("div",{class:"flex items-center space-x-3"},[e("span",{class:"text-red-600 text-2xl"},"⚠️"),e("h2",{class:"text-lg font-semibold text-red-600"},"Confirmation de suppression")],-1)),e("p",ke,[t[0]||(t[0]=_(" Êtes-vous sûr de vouloir supprimer ")),e("strong",we,i(d.renter.last_name.toUpperCase())+" "+i(d.renter.first_name),1),t[1]||(t[1]=_(" ? "))]),t[4]||(t[4]=e("p",{class:"text-sm text-gray-500 mt-2"},[_("Cette action est "),e("span",{class:"font-semibold text-red-500"},"irréversible"),_(".")],-1)),e("div",{class:"flex justify-end mt-6 space-x-3"},[e("button",{onClick:f,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-100 transition"}," Annuler "),e("button",{onClick:x,class:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition flex items-center"},t[2]||(t[2]=[e("span",{class:"mr-2"},"🗑️",-1),_(" Supprimer ")]))])])]))}},Ce=j(he,[["__scopeId","data-v-d630a9e8"]]),je={class:"bg-gray-800 p-4 rounded-lg shadow-lg flex flex-col sm:flex-row gap-4 border border-gray-700"},Re=["value"],Me=["value"],Fe=["value"],Se={__name:"RentersFilters",setup(d){const u=T(),m=H(),{activeFilters:l,isAnyFilterActive:p}=w(u),{updateFilters:f}=u,{renters:x}=w(u),{tutors:k}=w(m);L(()=>{m.fetchTutors()});const t=V(()=>[...new Set(x.value.map(g=>g.last_name))]),b=V(()=>[...new Set(x.value.map(g=>g.first_name))]),R=V(()=>k.value);Q(l,g=>{f(g)},{deep:!0});const A=()=>{f({last_name:"",first_name:"",tutor:""})};return(g,s)=>(o(),n("div",je,[e("div",null,[s[4]||(s[4]=e("label",{class:"text-sm text-gray-300 font-semibold"},"Nom :",-1)),h(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>r(l).last_name=a),class:"filter-input"},[s[3]||(s[3]=e("option",{value:""},"Tous",-1)),(o(!0),n($,null,C(t.value,a=>(o(),n("option",{key:a,value:a},i(a.toUpperCase()),9,Re))),128))],512),[[S,r(l).last_name]])]),e("div",null,[s[6]||(s[6]=e("label",{class:"text-sm text-gray-300 font-semibold"},"Prénom :",-1)),h(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>r(l).first_name=a),class:"filter-input"},[s[5]||(s[5]=e("option",{value:""},"Tous",-1)),(o(!0),n($,null,C(b.value,a=>(o(),n("option",{key:a,value:a},i(a.toUpperCase()),9,Me))),128))],512),[[S,r(l).first_name]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"text-sm text-gray-300 font-semibold"},"Tuteur :",-1)),h(e("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>r(l).tutor=a),class:"filter-input"},[s[7]||(s[7]=e("option",{value:""},"Tous",-1)),(o(!0),n($,null,C(R.value,a=>(o(),n("option",{key:a.id,value:a.id},i(a.last_name.toUpperCase())+" "+i(a.first_name),9,Fe))),128))],512),[[S,r(l).tutor]])]),r(p)?(o(),n("button",{key:0,onClick:A,class:"btn-secondary"}," Réinitialiser ")):y("",!0)]))}},Ue=j(Se,[["__scopeId","data-v-74cdfa9a"]]),Ee={class:"bg-gray-800 p-6 rounded-lg shadow-lg flex flex-col space-y-4 hover:shadow-xl transition-all transform hover:scale-[1.02] border border-gray-700"},Te={class:"flex justify-between items-center border-b pb-3"},Ae={class:"text-xl font-semibold text-white flex items-center gap-2"},Ve={class:"bg-gray-900 p-4 rounded-md space-y-3"},De={class:"text-gray-300 text-sm flex items-center"},Ie={class:"text-indigo-400 ml-1"},Le={class:"bg-gray-900 p-4 rounded-lg flex flex-col space-y-2"},Ne={class:"text-gray-300 text-sm flex items-center"},ze={class:"ml-1 text-indigo-300"},Be={class:"text-gray-300 text-sm flex items-center"},Oe={class:"ml-1 text-indigo-300"},Pe={__name:"RenterListItem",props:{renter:{type:Object,required:!0}},setup(d){const u=E(!1),m=E(!1);function l(){u.value=!0}function p(){u.value=!1}function f(){m.value=!0}function x(){m.value=!1}return(k,t)=>(o(),n($,null,[e("div",Ee,[e("div",Te,[e("h2",Ae," 👤 "+i(d.renter.last_name.toUpperCase())+" "+i(d.renter.first_name),1)]),e("div",Ve,[e("p",De,[t[0]||(t[0]=_(" 👤 ")),t[1]||(t[1]=e("span",{class:"ml-2 font-semibold text-white"},"Tuteur :",-1)),e("span",Ie,i(d.renter.tutor?`${d.renter.tutor.last_name} ${d.renter.tutor.first_name}`:"Aucun tuteur"),1)])]),e("div",Le,[e("p",Ne,[t[2]||(t[2]=_(" 🕒 ")),t[3]||(t[3]=e("span",{class:"ml-2 font-semibold text-white"},"Créé le :",-1)),e("span",ze,i(d.renter.created_at),1)]),e("p",Be,[t[4]||(t[4]=_(" 🔄 ")),t[5]||(t[5]=e("span",{class:"ml-2 font-semibold text-white"},"Mis à jour le :",-1)),e("span",Oe,i(d.renter.updated_at),1)])]),e("div",{class:"flex justify-center gap-3 mt-4"},[e("button",{onClick:l,class:"btn-action bg-blue-500"}," ✏️ Modifier "),e("button",{onClick:f,class:"btn-action bg-red-500"}," 🗑️ Supprimer ")])]),u.value?(o(),U(r(J),{key:0,renter:d.renter,onClose:p},null,8,["renter"])):y("",!0),m.value?(o(),U(r(Ce),{key:1,renter:d.renter,onClose:x},null,8,["renter"])):y("",!0)],64))}},qe=j(Pe,[["__scopeId","data-v-41ed3b54"]]),Ge={class:"bg-gray-900"},He={class:"mx-auto max-w-7xl"},Je={class:"bg-gray-900 py-10"},Ke={class:"px-4 sm:px-6 lg:px-8"},Qe={class:"sm:flex sm:items-center"},We={class:"mt-4"},rt={__name:"Renters",setup(d){const u=E(!1);return(m,l)=>(o(),n($,null,[D(W),e("div",Ge,[e("div",He,[e("div",Je,[e("div",Ke,[e("div",Qe,[l[2]||(l[2]=e("div",{class:"sm:flex-auto"},[e("h1",{class:"text-base font-semibold leading-6 text-white"},"Locataires"),e("p",{class:"mt-2 text-sm text-gray-300"}," Une liste de tous les locataires dans votre compte, y compris leur nom, prénom et tuteur. ")],-1)),e("div",We,[e("button",{onClick:l[0]||(l[0]=p=>u.value=!0),class:"bg-indigo-500 text-white px-4 py-2 rounded-md"}," Ajouter un locataire ")])]),D(r(ne)),u.value?(o(),U(r(J),{key:0,onClose:l[1]||(l[1]=p=>u.value=!1)})):y("",!0)])])])])],64))}};export{rt as default};
