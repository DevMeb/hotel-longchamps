import{s as F,l as q,o as r,c as l,h as j,u as s,a as e,t as c,F as y,d as M,g as h,r as w,z as G,w as R,f,i as k,v as U,n as L,e as v,b as z,k as H,m as T}from"./app-MOnSz09z.js";import{_ as J}from"./utils-mT5RtY73.js";import{u as $}from"./rooms-BBmIhNCl.js";import"./hotel-logo-EkMEN4AC.js";const K={class:"mt-6"},P={key:0,class:"flex justify-center my-6"},Q={key:1,class:"flex justify-center my-6 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg"},W={class:"text-lg font-medium ml-2"},X={key:2,class:"flex justify-center my-6 bg-gray-800 px-6 py-4 rounded-lg shadow-lg"},Y={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8"},Z={__name:"RoomList",setup(m){const a=$(),{fetchRooms:i,clearErrors:d}=a,{filteredRooms:u,errors:p,loading:x}=F(a);return q(()=>{i(),d("fetch")}),(g,t)=>(r(),l("div",K,[j(s(ye)),s(x).fetch?(r(),l("div",P,t[0]||(t[0]=[e("div",{class:"animate-spin inline-block w-6 h-6 border-4 border-white border-t-transparent rounded-full"},null,-1),e("p",{class:"text-white text-lg font-medium ml-2"},"Chargement des cahmbres...",-1)]))):s(p).fetch?(r(),l("div",Q,[t[1]||(t[1]=e("span",{class:"text-xl"},"❌",-1)),e("p",W,c(s(p).fetch),1)])):s(u).length===0?(r(),l("div",X,t[2]||(t[2]=[e("p",{class:"text-gray-300 text-lg"},"📭 Aucune chambre trouvé.",-1)]))):(r(),l("div",Y,[(r(!0),l(y,null,M(s(u),n=>(r(),h(s(Se),{room:n,key:n.id},null,8,["room"]))),128))]))]))}},ee={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-md z-50"},te={class:"bg-white p-6 rounded-xl shadow-xl w-[90%] sm:w-96 transform transition-all animate-fade-in"},se={class:"flex items-center justify-between border-b pb-2"},oe={class:"text-xl font-semibold text-gray-800 flex items-center"},re={key:0,class:"mr-2"},ne={key:1,class:"mr-2"},le={key:0,class:"error-message"},ae={key:0,class:"error-message"},ie={class:"flex justify-end space-x-3 mt-4"},de=["disabled"],me={key:0,class:"animate-spin mr-2"},B={__name:"RoomFormModal",props:{room:Object},emits:["close"],setup(m,{emit:a}){const i=m,d=a,u=$(),{addRoom:p,updateRoom:x,clearErrors:g}=u,{errors:t,loading:n}=F(u),o=w({id:null,name:"",rent:""});G(()=>{o.value=i.room?{...i.room}:{id:null,name:"",rent:""}});const O=async()=>{(o.value.id?await x(o.value):await p(o.value))&&_()},_=()=>{g("validationErrors"),d("close")};return(I,b)=>{var E,S,A,V,D,N;return r(),l("div",ee,[e("div",{onClick:R(_,["self"]),class:"fixed inset-0"}),e("div",te,[e("div",se,[e("h2",oe,[o.value.id?(r(),l("span",re,"✏️")):(r(),l("span",ne,"➕")),f(" "+c(o.value.id?"Éditer la chambre":"Ajouter une chambre"),1)]),e("button",{onClick:_,class:"text-gray-500 hover:text-gray-700 transition"},"✖️")]),e("form",{onSubmit:R(O,["prevent"]),class:"mt-4 space-y-4"},[e("div",null,[b[2]||(b[2]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),k(e("input",{ref:"firstInput",type:"text","onUpdate:modelValue":b[0]||(b[0]=C=>o.value.name=C),class:L(["input-field",{"border-red-500":((S=(E=s(t).validationErrors)==null?void 0:E.name)==null?void 0:S.length)>0}])},null,2),[[U,o.value.name]]),(A=s(t).validationErrors)!=null&&A.name?(r(),l("p",le,c(s(t).validationErrors.name.join(", ")),1)):v("",!0)]),e("div",null,[b[3]||(b[3]=e("label",{for:"rent",class:"block text-sm font-medium text-gray-700"},"Loyer (en €)",-1)),k(e("input",{type:"text","onUpdate:modelValue":b[1]||(b[1]=C=>o.value.rent=C),class:L(["input-field",{"border-red-500":((D=(V=s(t).validationErrors)==null?void 0:V.rent)==null?void 0:D.length)>0}])},null,2),[[U,o.value.rent]]),(N=s(t).validationErrors)!=null&&N.rent?(r(),l("p",ae,c(s(t).validationErrors.rent.join(", ")),1)):v("",!0)]),e("div",ie,[e("button",{type:"button",onClick:_,class:"btn-secondary"},"Annuler"),e("button",{type:"submit",class:"btn-primary flex items-center",disabled:o.value.id?s(n).update:s(n).add},[(o.value.id?s(n).update:s(n).add)?(r(),l("span",me,"⏳")):v("",!0),f(" "+c(o.value.id?"Mettre à jour":"Ajouter"),1)],8,de)])],32)])])}}},ue={class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-md flex items-center justify-center z-50"},ce={class:"bg-white p-6 rounded-lg shadow-lg w-[24rem] animate-fade-in transform transition-transform scale-95"},pe={class:"text-gray-700 mt-3"},fe={class:"text-gray-900"},xe={__name:"RoomDeleteModal",props:{room:Object},emits:["close"],setup(m,{emit:a}){const i=$(),{deleteRoom:d}=i,u=a;function p(){u("close")}async function x(){await d(m.room.id)}return(g,t)=>(r(),l("div",ue,[e("div",{onClick:R(p,["self"]),class:"absolute inset-0"}),e("div",ce,[t[3]||(t[3]=e("div",{class:"flex items-center space-x-3"},[e("span",{class:"text-red-600 text-2xl"},"⚠️"),e("h2",{class:"text-lg font-semibold text-red-600"},"Confirmation de suppression")],-1)),e("p",pe,[t[0]||(t[0]=f(" Êtes-vous sûr de vouloir supprimer ")),e("strong",fe,c(m.room.name.toUpperCase()),1),t[1]||(t[1]=f(" ? "))]),t[4]||(t[4]=e("p",{class:"text-sm text-gray-500 mt-2"},[f(" En supprimant la chambre, toutes les réservations et factures associées à cette chambre seront supprimées. Cette action est "),e("span",{class:"font-semibold text-red-500"},"irréversible"),f(". ")],-1)),e("div",{class:"flex justify-end mt-6 space-x-3"},[e("button",{onClick:p,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-100 transition"}," Annuler "),e("button",{onClick:x,class:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition flex items-center"},t[2]||(t[2]=[e("span",{class:"mr-2"},"🗑️",-1),f(" Supprimer ")]))])])]))}},be={class:"bg-gray-800 p-4 rounded-lg shadow-lg flex flex-col sm:flex-row gap-4"},ve=["value"],ge=["value"],ye={__name:"RoomFilters",setup(m){const a=$(),{activeFilters:i,isAnyFilterActive:d}=F(a),{updateFilters:u}=a,p=z(()=>[...new Set(a.rooms.map(t=>t.name))]),x=z(()=>[...new Set(a.rooms.map(t=>t.rent))].sort((t,n)=>t-n));H(i,t=>{u(t)},{deep:!0});const g=()=>{u({name:"",rent:""})};return(t,n)=>(r(),l("div",be,[e("div",null,[n[3]||(n[3]=e("label",{class:"text-sm text-gray-300 font-semibold"},"Nom :",-1)),k(e("select",{"onUpdate:modelValue":n[0]||(n[0]=o=>s(i).name=o),class:"filter-input"},[n[2]||(n[2]=e("option",{value:""},"Toutes",-1)),(r(!0),l(y,null,M(p.value,o=>(r(),l("option",{key:o,value:o},c(o.toUpperCase()),9,ve))),128))],512),[[T,s(i).name]])]),e("div",null,[n[5]||(n[5]=e("label",{class:"text-sm text-gray-300 font-semibold"},"Loyer :",-1)),k(e("select",{"onUpdate:modelValue":n[1]||(n[1]=o=>s(i).rent=o),class:"filter-input"},[n[4]||(n[4]=e("option",{value:""},"Tous",-1)),(r(!0),l(y,null,M(x.value,o=>(r(),l("option",{key:o,value:o},c(o)+" € ",9,ge))),128))],512),[[T,s(i).rent]])]),s(d)?(r(),l("button",{key:0,onClick:g,class:"btn-secondary"}," Réinitialiser ")):v("",!0)]))}},_e={class:"bg-gray-800 p-6 rounded-xl shadow-lg flex flex-col space-y-4 hover:shadow-2xl transition-all transform hover:scale-[1.03] border border-gray-700"},he={class:"flex justify-between items-center border-b pb-3"},we={class:"text-xl font-semibold text-white flex items-center gap-2"},ke={class:"bg-gray-900 p-4 rounded-lg space-y-3"},$e={class:"text-gray-300 text-sm flex items-center"},Ce={class:"text-indigo-400 ml-1"},je={class:"bg-gray-900 p-4 rounded-lg flex flex-col space-y-2"},Me={class:"text-gray-300 text-sm flex items-center"},Re={class:"ml-1 text-indigo-300"},Fe={class:"text-gray-300 text-sm flex items-center"},Ee={class:"ml-1 text-indigo-300"},Se={__name:"RoomListItem",props:{room:{type:Object,required:!0}},setup(m){const a=w(!1),i=w(!1);function d(){a.value=!0}function u(){a.value=!1}function p(){i.value=!0}function x(){i.value=!1}return(g,t)=>(r(),l(y,null,[e("div",_e,[e("div",he,[e("h2",we," 🏠 "+c(m.room.name.toUpperCase()),1)]),e("div",ke,[e("p",$e,[t[0]||(t[0]=f(" 💰 ")),t[1]||(t[1]=e("span",{class:"ml-2 font-semibold text-white"},"Loyer :",-1)),e("span",Ce,c(m.room.rent)+" € ",1)])]),e("div",je,[e("p",Me,[t[2]||(t[2]=f(" 🕒 ")),t[3]||(t[3]=e("span",{class:"ml-2 font-semibold text-white"},"Créé le :",-1)),e("span",Re,c(m.room.created_at),1)]),e("p",Fe,[t[4]||(t[4]=f(" 🔄 ")),t[5]||(t[5]=e("span",{class:"ml-2 font-semibold text-white"},"Mis à jour le :",-1)),e("span",Ee,c(m.room.updated_at),1)])]),e("div",{class:"flex justify-center gap-3 mt-4"},[e("button",{onClick:d,class:"btn-action bg-blue-800 hover:bg-blue-500"}," ✏️ Modifier "),e("button",{onClick:p,class:"btn-action bg-red-800 hover:bg-red-500"}," 🗑️ Supprimer ")])]),a.value?(r(),h(s(B),{key:0,room:m.room,onClose:u},null,8,["room"])):v("",!0),i.value?(r(),h(s(xe),{key:1,room:m.room,onClose:x},null,8,["room"])):v("",!0)],64))}},Ae={class:"bg-gray-900 min-h-screen"},Ve={class:"mx-auto max-w-7xl py-10 px-4 sm:px-6 lg:px-8"},De={class:"sm:flex sm:items-center justify-between"},Te={__name:"Rooms",setup(m){const a=w(!1);return(i,d)=>(r(),l(y,null,[j(J),e("div",Ae,[e("div",Ve,[e("div",De,[d[2]||(d[2]=e("div",{class:"sm:flex-auto"},[e("h1",{class:"text-lg font-semibold leading-6 text-white"},"Chambres"),e("p",{class:"mt-2 text-sm text-gray-300"}," Gérez les chambres de votre hôtel avec leurs noms et loyers. ")],-1)),e("button",{onClick:d[0]||(d[0]=u=>a.value=!0),class:"bg-indigo-500 text-white px-4 py-2 rounded-md"},"➕ Ajouter une chambre")]),j(s(Z)),a.value?(r(),h(s(B),{key:0,onClose:d[1]||(d[1]=u=>a.value=!1)})):v("",!0)])])],64))}};export{Te as default};
