import{s as S,l as R,o as l,c as r,h as M,u as o,a as t,t as u,F as k,d as E,g as C,r as j,z as I,w as F,f as x,i as y,v as h,n as $,e as b,b as z,k as P,m as B}from"./app-MOnSz09z.js";import{_ as q}from"./utils-mT5RtY73.js";import{u as T}from"./tutors-BvmYhJZ0.js";import"./hotel-logo-EkMEN4AC.js";const G={class:"mt-6"},H={key:0,class:"flex justify-center my-6"},J={key:1,class:"flex justify-center my-6 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg"},K={class:"text-lg font-medium ml-2"},Q={key:2,class:"flex justify-center my-6 bg-gray-800 px-6 py-4 rounded-lg shadow-lg"},W={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8"},X={__name:"TutorList",setup(d){const a=T(),{fetchTutors:i,clearErrors:m}=a,{filteredTutors:p,errors:f,loading:v}=S(a);return R(()=>{i(),m("fetch")}),(_,e)=>(l(),r("div",G,[M(o(yt)),o(v).fetch?(l(),r("div",H,e[0]||(e[0]=[t("div",{class:"animate-spin inline-block w-6 h-6 border-4 border-white border-t-transparent rounded-full"},null,-1),t("p",{class:"text-white text-lg font-medium ml-2"},"Chargement des tuteurs...",-1)]))):o(f).fetch?(l(),r("div",J,[e[1]||(e[1]=t("span",{class:"text-xl"},"❌",-1)),t("p",K,u(o(f).fetch),1)])):o(p).length===0?(l(),r("div",Q,e[2]||(e[2]=[t("p",{class:"text-gray-300 text-lg"},"📭 Aucun tuteur trouvé.",-1)]))):(l(),r("div",W,[(l(!0),r(k,null,E(o(p),n=>(l(),C(o(Vt),{tutor:n,key:n.id},null,8,["tutor"]))),128))]))]))}},Y={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-md z-50"},Z={class:"bg-white p-6 rounded-xl shadow-xl w-[90%] sm:w-96 transform transition-all animate-fade-in"},tt={class:"flex items-center justify-between border-b pb-2"},et={class:"text-xl font-semibold text-gray-800 flex items-center"},st={key:0,class:"mr-2"},ot={key:1,class:"mr-2"},lt={key:0,class:"error-message"},nt={key:0,class:"error-message"},rt={key:0,class:"error-message"},at={key:0,class:"error-message"},it={class:"flex justify-end space-x-3 mt-4"},dt=["disabled"],ut={key:0,class:"animate-spin mr-2"},L={__name:"TutorFormModal",props:{tutor:Object},emits:["close"],setup(d,{emit:a}){const i=d,m=a,p=T(),{addTutor:f,updateTutor:v,clearErrors:_}=p,{errors:e,loading:n}=S(p),s=j({id:null,last_name:"",first_name:"",email:"",phone:""});I(()=>{s.value=i.tutor?{...i.tutor}:{id:null,last_name:"",first_name:"",email:"",phone:""}});const N=async()=>{(s.value.id?await v(s.value):await f(s.value))&&w()},w=()=>{_("validationErrors"),m("close")};return(O,c)=>{var U,V,A,D;return l(),r("div",Y,[t("div",{onClick:F(w,["self"]),class:"fixed inset-0"}),t("div",Z,[t("div",tt,[t("h2",et,[s.value.id?(l(),r("span",st,"✏️")):(l(),r("span",ot,"➕")),x(" "+u(s.value.id?"Éditer le tuteur":"Ajouter un tuteur"),1)]),t("button",{onClick:w,class:"text-gray-500 hover:text-gray-700 transition"},"✖️")]),t("form",{onSubmit:F(N,["prevent"]),class:"mt-4 space-y-4"},[t("div",null,[c[4]||(c[4]=t("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),y(t("input",{ref:"firstInput",type:"text","onUpdate:modelValue":c[0]||(c[0]=g=>s.value.last_name=g),class:$(["input-field",{"border-red-500":o(e).last_name}])},null,2),[[h,s.value.last_name]]),(U=o(e).validationErrors)!=null&&U.last_name?(l(),r("p",lt,u(o(e).validationErrors.last_name.join(", ")),1)):b("",!0)]),t("div",null,[c[5]||(c[5]=t("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),y(t("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=g=>s.value.first_name=g),class:$(["input-field",{"border-red-500":o(e).first_name}])},null,2),[[h,s.value.first_name]]),(V=o(e).validationErrors)!=null&&V.first_name?(l(),r("p",nt,u(o(e).validationErrors.first_name.join(", ")),1)):b("",!0)]),t("div",null,[c[6]||(c[6]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),y(t("input",{type:"email","onUpdate:modelValue":c[2]||(c[2]=g=>s.value.email=g),class:$(["input-field",{"border-red-500":o(e).email}])},null,2),[[h,s.value.email]]),(A=o(e).validationErrors)!=null&&A.email?(l(),r("p",rt,u(o(e).validationErrors.email.join(", ")),1)):b("",!0)]),t("div",null,[c[7]||(c[7]=t("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),y(t("input",{type:"text","onUpdate:modelValue":c[3]||(c[3]=g=>s.value.phone=g),class:$(["input-field",{"border-red-500":o(e).phone}])},null,2),[[h,s.value.phone]]),(D=o(e).validationErrors)!=null&&D.phone?(l(),r("p",at,u(o(e).validationErrors.phone.join(", ")),1)):b("",!0)]),t("div",it,[t("button",{type:"button",onClick:w,class:"btn-secondary"},"Annuler"),t("button",{type:"submit",class:"btn-primary flex items-center",disabled:s.value.id?o(n).update:o(n).add},[(s.value.id?o(n).update:o(n).add)?(l(),r("span",ut,"⏳")):b("",!0),x(" "+u(s.value.id?"Mettre à jour":"Ajouter"),1)],8,dt)])],32)])])}}},mt={class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-md flex items-center justify-center z-50"},ct={class:"bg-white p-6 rounded-lg shadow-lg w-[24rem] animate-fade-in transform transition-transform scale-95"},pt={class:"text-gray-700 mt-3"},ft={class:"text-gray-900"},xt={__name:"TutorDeleteModal",props:{tutor:Object},emits:["close"],setup(d,{emit:a}){const i=T(),{deleteTutor:m}=i,p=a;function f(){p("close")}async function v(){await m(d.tutor.id)}return(_,e)=>(l(),r("div",mt,[t("div",{onClick:F(f,["self"]),class:"absolute inset-0"}),t("div",ct,[e[3]||(e[3]=t("div",{class:"flex items-center space-x-3"},[t("span",{class:"text-red-600 text-2xl"},"⚠️"),t("h2",{class:"text-lg font-semibold text-red-600"},"Confirmation de suppression")],-1)),t("p",pt,[e[0]||(e[0]=x(" Êtes-vous sûr de vouloir supprimer ")),t("strong",ft,u(d.tutor.last_name.toUpperCase())+" "+u(d.tutor.first_name),1),e[1]||(e[1]=x(" ? "))]),e[4]||(e[4]=t("p",{class:"text-sm text-gray-500 mt-2"},[x("Cette action est "),t("span",{class:"font-semibold text-red-500"},"irréversible"),x(".")],-1)),t("div",{class:"flex justify-end mt-6 space-x-3"},[t("button",{onClick:f,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-100 transition"}," Annuler "),t("button",{onClick:v,class:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition flex items-center"},e[2]||(e[2]=[t("span",{class:"mr-2"},"🗑️",-1),x(" Supprimer ")]))])])]))}},vt={class:"bg-gray-800 p-4 rounded-lg shadow-lg flex flex-col sm:flex-row gap-4"},bt=["value"],gt=["value"],yt={__name:"TutorFilters",setup(d){const a=T(),{activeFilters:i,isAnyFilterActive:m}=S(a),{updateFilters:p}=a,f=z(()=>[...new Set(a.tutors.map(e=>e.last_name))]),v=z(()=>[...new Set(a.tutors.map(e=>e.first_name))]);P(i,e=>{p(e)},{deep:!0});const _=()=>{p({last_name:"",first_name:"",email:""})};return(e,n)=>(l(),r("div",vt,[t("div",null,[n[4]||(n[4]=t("label",{class:"text-sm text-gray-300 font-semibold"},"Nom :",-1)),y(t("select",{"onUpdate:modelValue":n[0]||(n[0]=s=>o(i).last_name=s),class:"filter-input"},[n[3]||(n[3]=t("option",{value:""},"Tous",-1)),(l(!0),r(k,null,E(f.value,s=>(l(),r("option",{key:s,value:s},u(s==null?void 0:s.toUpperCase()),9,bt))),128))],512),[[B,o(i).last_name]])]),t("div",null,[n[6]||(n[6]=t("label",{class:"text-sm text-gray-300 font-semibold"},"Prénom :",-1)),y(t("select",{"onUpdate:modelValue":n[1]||(n[1]=s=>o(i).first_name=s),class:"filter-input"},[n[5]||(n[5]=t("option",{value:""},"Tous",-1)),(l(!0),r(k,null,E(v.value,s=>(l(),r("option",{key:s,value:s},u(s==null?void 0:s.toUpperCase()),9,gt))),128))],512),[[B,o(i).first_name]])]),t("div",null,[n[7]||(n[7]=t("label",{class:"text-sm text-gray-300 font-semibold"},"Email :",-1)),y(t("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=s=>o(i).email=s),placeholder:"Rechercher un email...",class:"filter-input"},null,512),[[h,o(i).email]])]),o(m)?(l(),r("button",{key:0,onClick:_,class:"btn-secondary"}," Réinitialiser ")):b("",!0)]))}},_t={class:"bg-gray-800 p-6 rounded-lg shadow-lg flex flex-col space-y-4 hover:shadow-xl transition-all transform hover:scale-[1.02] border border-gray-700"},ht={class:"flex justify-between items-center border-b pb-3"},kt={class:"text-xl font-semibold text-white flex items-center gap-2"},wt={class:"bg-gray-900 p-4 rounded-md space-y-3"},$t={class:"text-gray-300 text-sm flex items-center"},Ct={class:"text-indigo-400 ml-1"},jt={class:"text-gray-300 text-sm flex items-center"},Tt={class:"text-indigo-400 ml-1"},Mt={class:"bg-gray-900 p-4 rounded-lg flex flex-col space-y-2"},Et={class:"text-gray-300 text-sm flex items-center"},Ft={class:"ml-1 text-indigo-300"},St={class:"text-gray-300 text-sm flex items-center"},Ut={class:"ml-1 text-indigo-300"},Vt={__name:"TutorListItem",props:{tutor:{type:Object,required:!0}},setup(d){const a=j(!1),i=j(!1);function m(){a.value=!0}function p(){a.value=!1}function f(){i.value=!0}function v(){i.value=!1}return(_,e)=>(l(),r(k,null,[t("div",_t,[t("div",ht,[t("h2",kt," 👤 "+u(d.tutor.last_name.toUpperCase())+" "+u(d.tutor.first_name),1)]),t("div",wt,[t("p",$t,[e[0]||(e[0]=x(" ✉️ ")),e[1]||(e[1]=t("span",{class:"ml-2 font-semibold text-white"},"Email :",-1)),t("span",Ct,u(d.tutor.email),1)]),t("p",jt,[e[2]||(e[2]=x(" 📞 ")),e[3]||(e[3]=t("span",{class:"ml-2 font-semibold text-white"},"Téléphone :",-1)),t("span",Tt,u(d.tutor.phone||"Non renseigné"),1)])]),t("div",Mt,[t("p",Et,[e[4]||(e[4]=x(" 🕒 ")),e[5]||(e[5]=t("span",{class:"ml-2 font-semibold text-white"},"Créé le :",-1)),t("span",Ft,u(d.tutor.created_at),1)]),t("p",St,[e[6]||(e[6]=x(" 🔄 ")),e[7]||(e[7]=t("span",{class:"ml-2 font-semibold text-white"},"Mis à jour le :",-1)),t("span",Ut,u(d.tutor.updated_at),1)])]),t("div",{class:"flex justify-center gap-3 mt-4"},[t("button",{onClick:m,class:"btn-action bg-blue-500"}," ✏️ Modifier "),t("button",{onClick:f,class:"btn-action bg-red-500"}," 🗑️ Supprimer ")])]),a.value?(l(),C(o(L),{key:0,tutor:d.tutor,onClose:p},null,8,["tutor"])):b("",!0),i.value?(l(),C(o(xt),{key:1,tutor:d.tutor,onClose:v},null,8,["tutor"])):b("",!0)],64))}},At={class:"bg-gray-900"},Dt={class:"mx-auto max-w-7xl"},zt={class:"bg-gray-900 py-10"},Bt={class:"px-4 sm:px-6 lg:px-8"},Lt={class:"sm:flex sm:items-center"},Nt={class:"mt-4"},qt={__name:"Tutors",setup(d){const a=j(!1);return(i,m)=>(l(),r(k,null,[M(q),t("div",At,[t("div",Dt,[t("div",zt,[t("div",Bt,[t("div",Lt,[m[2]||(m[2]=t("div",{class:"sm:flex-auto"},[t("h1",{class:"text-base font-semibold leading-6 text-white"},"Tuteurs"),t("p",{class:"mt-2 text-sm text-gray-300"}," Une liste de tous les tuteurs dans votre compte, y compris leur nom, prénom, email et téléphone. ")],-1)),t("div",Nt,[t("button",{onClick:m[0]||(m[0]=p=>a.value=!0),class:"bg-indigo-500 text-white px-4 py-2 rounded-md"},"Ajouter un tuteur")])]),M(o(X)),a.value?(l(),C(o(L),{key:0,onClose:m[1]||(m[1]=p=>a.value=!1)})):b("",!0)])])])])],64))}};export{qt as default};
